<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Bolyg√≥k</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel='stylesheet' href='https://unpkg.com/splitting@1.0.6/dist/splitting.css'>
    <link rel="stylesheet" href="style.css">
    

</head>
<body>


    <script src="https://codepen.io/shshaw/pen/QmZYMG.js"></script>

    <div id="app" data-current-planet="mercury">

        <nav class="planet-nav">
            <svg viewBox="0 20 400 400" xmlns="http://www.w3.org/2000/svg">
                <path id="navPath"
                      d="M10,200 C30,-28 370,-28 390,200"
                      fill="none" />
                <text>
                    <textPath href="#navPath" startOffset="0" font-size="10">
                        <tspan>Merk√∫r</tspan>
                        <tspan>V√©nusz</tspan>
                        <tspan>F√∂ld</tspan>
                        <tspan>Mars</tspan>
                        <tspan>Jupiter</tspan>
                        <tspan>Szaturnusz</tspan>
                        <tspan>Ur√°nusz</tspan>
                        <tspan>Neptunusz</tspan>
                    </textPath>
                </text>

            </svg>
        </nav>

        <div class="planet" data-planet="mercury" data-active>
            <div class="planet-title">
                <h1>Merk√∫r</h1>
                <p class="planet-description">Kicsi √©s k√∂zel √°ll a naphoz.</p>
            </div>

            <div class="planet-details">
                <div class="detail" data-detail="tilt" data-postfix="¬∞">
                    3.13
                </div>
                <div class="detail" data-detail="gravity" data-postfix="ùóë">
                    0.9
                </div>
                <div class="detail" data-detail="hours">
                    10
                </div>
            </div>

            <figure class="planet-figure">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-1188/1_mercury.jpg" />
            </figure>
        </div>

        <div class="planet" data-planet="venus">
            <div class="planet-title">
                <h1>V√©nusz</h1>
                <p class="planet-description">A V√©nusz a m√°sodik bolyg√≥ a Napt√≥l, kering√©si ideje 224,7 f√∂ldi nap. Nev√©t Venusr√≥l, a sz√©ps√©g r√≥mai istenn≈ëj√©r≈ël kapta.</p>
            </div>

            <div class="planet-details">
                <div class="detail" data-detail="tilt" data-postfix="¬∞">
                    4.13
                </div>
                <div class="detail" data-detail="gravity" data-postfix="ùóë">
                    0.2
                </div>
                <div class="detail" data-detail="hours">
                    20
                </div>
            </div>

            <figure class="planet-figure">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-1188/2_venus.jpg" />
            </figure>
        </div>

        <div class="planet" data-planet="earth">
            <div class="planet-title">
                <h1>F√∂ld</h1>
                <p class="planet-description">a Napt√≥l sz√°m√≠tott harmadik bolyg√≥ a Naprendszerben, ahol a legnagyobb √°tm√©r≈ëj≈±, t√∂meg≈± √©s s≈±r≈±s√©g≈± F√∂ld-t√≠pus√∫ bolyg√≥.</p>
            </div>

            <div class="planet-details">
                <div class="detail" data-detail="tilt" data-postfix="¬∞">
                    5.13
                </div>
                <div class="detail" data-detail="gravity" data-postfix="ùóë">
                    7.3
                </div>
                <div class="detail" data-detail="hours">
                    30
                </div>
            </div>

            <figure class="planet-figure">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-1188/3_earth.jpg" />
            </figure>
        </div>

        <div class="planet" data-planet="mars">
            <div class="planet-title">
                <h1>Mars</h1>
                <p class="planet-description">A Mars a Napt√≥l sz√°m√≠tott negyedik bolyg√≥ a Naprendszerben. Szabad szemmel is k√∂nnyed√©n l√°that√≥ az √©jszakai √©gbolton.</p>
            </div>

            <div class="planet-details">
                <div class="detail" data-detail="tilt" data-postfix="¬∞">
                    6.13
                </div>
                <div class="detail" data-detail="gravity" data-postfix="ùóë">
                    1.1
                </div>
                <div class="detail" data-detail="hours">
                    40
                </div>
            </div>

            <figure class="planet-figure">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-1188/4_mars.jpg" />
            </figure>
        </div>

        <div class="planet" data-planet="jupiter">
            <div class="planet-title">
                <h1>Jupiter</h1>
                <p class="planet-description">K√©tszer olyan nagy mint az √∂sszes bolyg√≥ egyben</p>
            </div>

            <div class="planet-details">
                <div class="detail" data-detail="tilt" data-postfix="¬∞">
                    11.13
                </div>
                <div class="detail" data-detail="gravity" data-postfix="ùóë">
                    1.8
                </div>
                <div class="detail" data-detail="hours">
                    50
                </div>
            </div>

            <figure class="planet-figure">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-1188/5_jupiter.jpg" />
            </figure>
        </div>

        <div class="planet" data-planet="saturn">
            <div class="planet-title">
                <h1>Szaturnusz</h1>
                <p class="planet-description">A Szaturnusz a hatodik bolyg√≥ a Napt√≥l sz√°m√≠tva, a m√°sodik legnagyobb a Naprendszerben a Jupiter ut√°n.</p>
            </div>

            <div class="planet-details">
                <div class="detail" data-detail="tilt" data-postfix="¬∞">
                    9.13
                </div>
                <div class="detail" data-detail="gravity" data-postfix="ùóë">
                    7.3
                </div>
                <div class="detail" data-detail="hours">
                    60
                </div>
            </div>

            <figure class="planet-figure">
                <img src="ur√°nusz.jpeg" />
            </figure>
        </div>

        <div class="planet" data-planet="ur√°nusz">
            <div class="planet-title">
                <h1>Ur√°nusz</h1>
                <p class="planet-description">Az Ur√°nusz a Naprendszer hetedik bolyg√≥ja. √ìri√°sbolyg√≥, a harmadik legnagyobb √°tm√©r≈ëj≈± √©s a negyedik legnagyobb t√∂meg≈±.</p>
            </div>

            <div class="planet-details">
                <div class="detail" data-detail="tilt" data-postfix="¬∞">
                    11.13
                </div>
                <div class="detail" data-detail="gravity" data-postfix="ùóë">
                    1.8
                </div>
                <div class="detail" data-detail="hours">
                    50
                </div>
            </div>

            <figure class="planet-figure">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-1188/7_uranus.jpg" />
            </figure>
        </div>


        <div class="planet" data-planet="neptune">
            <div class="planet-title">
                <h1>Neptunusz</h1>
                <p class="planet-description">A Neptunusz a Napt√≥l sz√°m√≠tva a nyolcadik, legk√ºls≈ë bolyg√≥ a Naprendszerben.</p>
            </div>

            <div class="planet-details">
                <div class="detail" data-detail="tilt" data-postfix="¬∞">
                    31.03
                </div>
                <div class="detail" data-detail="gravity" data-postfix="ùóë">
                    8.9
                </div>
                <div class="detail" data-detail="hours">
                    10
                </div>
            </div>

            <figure class="planet-figure">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-1188/8_neptune.jpg" />
            </figure>
        </div>
    </div>

    <script src='https://unpkg.com/splitting@1.0.6/dist/splitting.min.js'></script>
    <script>
        console.clear();

        Splitting({ target: '.planet-title h1', by: 'chars' });

        const elApp = document.querySelector('#app');

        const elPlanets = Array.from(document.querySelectorAll('[data-planet]')).
            reduce((acc, el) => {
                const planet = el.dataset.planet;

                acc[planet] = el;

                return acc;
            }, {});

        const planetKeys = Object.keys(elPlanets);

        function getDetails(planet) {

            const details = Array.from(elPlanets[planet].
                querySelectorAll(`[data-detail]`)).
                reduce((acc, el) => {
                    acc[el.dataset.detail] = el.innerHTML.trim();

                    return acc;
                }, { planet });

            return details;
        }

        // ...........

        let currentPlanetIndex = 0;
        let currentPlanet = getDetails('mercury');

        function selectPlanet(planet) {
            const prevPlanet = currentPlanet;
            const elActive = document.querySelector('[data-active]');

            delete elActive.dataset.active;

            const elPlanet = elPlanets[planet];

            elPlanet.dataset.active = true;
            currentPlanet = getDetails(elPlanet.dataset.planet);

            console.log(prevPlanet, currentPlanet);

            const elHoursDetail = elPlanet.querySelector('[data-detail="hours"]');
            animate.fromTo({
                from: +prevPlanet.hours,
                to: +currentPlanet.hours
            },
                value => {
                    elHoursDetail.innerHTML = Math.round(value);
                });

            const elTiltDetail = elPlanet.querySelector('[data-detail="tilt"]');
            animate.fromTo({
                from: +prevPlanet.tilt,
                to: +currentPlanet.tilt
            },
                value => {
                    elTiltDetail.innerHTML = value.toFixed(2);
                });

            const elGravityDetail = elPlanet.querySelector('[data-detail="gravity"]');

            animate.fromTo({
                from: +prevPlanet.gravity,
                to: +currentPlanet.gravity
            },
                value => {
                    elGravityDetail.innerHTML = value.toFixed(1);
                });
        }

        function selectPlanetByIndex(i) {
            currentPlanetIndex = i;
            elApp.style.setProperty('--active', i);
            selectPlanet(planetKeys[i]);
        }


        function animate(duration, fn) {
            const start = performance.now();
            const ticks = Math.ceil(duration / 16.666667);
            let progress = 0; 

            function tick(now) {
                if (progress >= 1) {
                    fn(1);
                    return;
                }

                const elapsed = now - start;
                progress = elapsed / duration;

               
                fn(progress); 

                requestAnimationFrame(tick); 
            }

            tick(start);
        }

        function easing(progress) {
            return (1 - Math.cos(progress * Math.PI)) / 2;
        }

        const animationDefaults = {
            duration: 1000,
            easing
        };


        animate.fromTo = ({
            from,
            to,
            easing,
            duration },
            fn) => {
            easing = easing || animationDefaults.easing;
            duration = duration || animationDefaults.duration;

            const delta = +to - +from;

            return animate(duration, progress => fn(from + easing(progress) * delta));
        };


        const svgNS = 'http://www.w3.org/2000/svg';
        const elSvgNav = document.querySelector('.planet-nav svg');

        const elTspans = [...document.querySelectorAll('tspan')];;
        const length = elTspans.length - 1;

        elSvgNav.style.setProperty('--length', length);

        const elNavPath = document.querySelector('#navPath');
        const elLastTspan = elTspans[length];
        const navPathLength = elNavPath.getTotalLength() - elLastTspan.getComputedTextLength();

        elTspans.forEach((tspan, i) => {
            let percent = i / length;

            tspan.setAttribute('x', percent * navPathLength);
            tspan.setAttributeNS(svgNS, 'x', percent * navPathLength);

            tspan.addEventListener('click', e => {
                e.preventDefault();
                selectPlanetByIndex(i);
            });

        });



    </script>

</body>
</html>


